{% extends "base.html" %}

{% block title %}–ö—É—Ä—Å—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è - CodeAcademy Pro{% endblock %}

{% block content %}
<div class="courses-container">
    <div class="courses-header">
        <h1>–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</h1>
        <p>–ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å –ª—é–±–æ–≥–æ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∑—ã–∫–æ–≤</p>
    </div>

    <div class="courses-grid">
        <!-- –ê–∫—Ç–∏–≤–Ω—ã–π –∫—É—Ä—Å Dart -->
        <div class="course-card active">
            <div class="course-icon">üéØ</div>
            <h3>Dart</h3>
            <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —è–∑—ã–∫ –æ—Ç Google –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</p>
            <div class="course-stats">
                <span class="difficulty">–ù–∞—á–∞–ª—å–Ω—ã–π</span>
                <span class="lessons-count">33 —É—Ä–æ–∫–∞</span>
            </div>
            <div class="course-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
                <span class="progress-text">0% –∑–∞–≤–µ—Ä—à–µ–Ω–æ</span>
            </div>
            <a href="{{ url_for('lessons') }}" class="course-button available">–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ</a>
        </div>

        <!-- –°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã -->
        <div class="course-card coming-soon">
            <div class="course-icon">üêç</div>
            <h3>Python</h3>
            <p>–ü–æ–ø—É–ª—è—Ä–Ω—ã–π —è–∑—ã–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è</p>
            <div class="course-stats">
                <span class="difficulty">–ù–∞—á–∞–ª—å–Ω—ã–π</span>
                <span class="lessons-count">–°–∫–æ—Ä–æ</span>
            </div>
            <button class="course-button coming-soon-btn" disabled>–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–µ–Ω</button>
        </div>

        <div class="course-card coming-soon">
            <div class="course-icon">‚ö°</div>
            <h3>JavaScript</h3>
            <p>–Ø–∑—ã–∫ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</p>
            <div class="course-stats">
                <span class="difficulty">–ù–∞—á–∞–ª—å–Ω—ã–π</span>
                <span class="lessons-count">–°–∫–æ—Ä–æ</span>
            </div>
            <button class="course-button coming-soon-btn" disabled>–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–µ–Ω</button>
        </div>

        <div class="course-card coming-soon">
            <div class="course-icon">‚òï</div>
            <h3>Java</h3>
            <p>–ú–æ—â–Ω—ã–π –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —è–∑—ã–∫ –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</p>
            <div class="course-stats">
                <span class="difficulty">–°—Ä–µ–¥–Ω–∏–π</span>
                <span class="lessons-count">–°–∫–æ—Ä–æ</span>
            </div>
            <button class="course-button coming-soon-btn" disabled>–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–µ–Ω</button>
        </div>

        <div class="course-card coming-soon">
            <div class="course-icon">üíé</div>
            <h3>C#</h3>
            <p>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —è–∑—ã–∫ –æ—Ç Microsoft –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</p>
            <div class="course-stats">
                <span class="difficulty">–°—Ä–µ–¥–Ω–∏–π</span>
                <span class="lessons-count">–°–∫–æ—Ä–æ</span>
            </div>
            <button class="course-button coming-soon-btn" disabled>–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–µ–Ω</button>
        </div>

        <div class="course-card coming-soon">
            <div class="course-icon">ü¶Ä</div>
            <h3>Rust</h3>
            <p>–°–∏—Å—Ç–µ–º–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
            <div class="course-stats">
                <span class="difficulty">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</span>
                <span class="lessons-count">–°–∫–æ—Ä–æ</span>
            </div>
            <button class="course-button coming-soon-btn" disabled>–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–µ–Ω</button>
        </div>
    </div>

    <div class="learning-path">
        <h2>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø—É—Ç—å –æ–±—É—á–µ–Ω–∏—è</h2>
        <div class="path-steps">
            <div class="path-step active">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Dart</h4>
                    <p>–ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ</p>
                </div>
            </div>
            <div class="path-arrow">‚Üí</div>
            <div class="path-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Python</h4>
                    <p>–†–∞—Å—à–∏—Ä—å—Ç–µ –∑–Ω–∞–Ω–∏—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º —è–∑—ã–∫–æ–º</p>
                </div>
            </div>
            <div class="path-arrow">‚Üí</div>
            <div class="path-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>JavaScript</h4>
                    <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
                </div>
            </div>
            <div class="path-arrow">‚Üí</div>
            <div class="path-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</h4>
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Java, C# –∏–ª–∏ Rust</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script id="server-progress-data" type="application/json">
    {{ progress|tojson }}
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫–∞—Ä—Ç–æ—á–∫–∞–º –∫—É—Ä—Å–æ–≤
    const courseCards = document.querySelectorAll('.course-card');
    courseCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∫—É—Ä—Å–∞ Dart
    updateDartProgress();
});

function updateDartProgress() {
    // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —Å —Å–µ—Ä–≤–µ—Ä–∞, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
    let serverProgress = [];
    const progressDataElement = document.getElementById('server-progress-data');
    if (progressDataElement) {
        try {
            serverProgress = JSON.parse(progressDataElement.textContent);
        } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:', e);
        }
    }
    
    const totalLessons = 33;
    let completedLessons = 0;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
    if (serverProgress.length > 0) {
        // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ lesson_id —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–º–µ—Ä—É —É—Ä–æ–∫–∞ (1-33)
        serverProgress.forEach(item => {
            if (item.completed && item.lesson_id >= 1 && item.lesson_id <= totalLessons) {
                completedLessons++;
            }
        });
    } else {
        // –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º localStorage
        const progressKey = 'lesson_progress';
        const progress = JSON.parse(localStorage.getItem(progressKey) || '{}');
        
        for (let i = 1; i <= totalLessons; i++) {
            if (progress[i] && progress[i].completed) {
                completedLessons++;
            }
        }
    }
    
    const progressPercent = (completedLessons / totalLessons) * 100;
    
    const progressFill = document.querySelector('.progress-fill');
    const progressText = document.querySelector('.progress-text');
    
    if (progressFill && progressText) {
        progressFill.style.width = progressPercent + '%';
        progressText.textContent = Math.round(progressPercent) + '% –∑–∞–≤–µ—Ä—à–µ–Ω–æ';
    }
}
</script>
{% endblock %}